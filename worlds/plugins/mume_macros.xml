<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- This Source Code Form is subject to the terms of the Mozilla Public -->
<!-- License, v. 2.0. If a copy of the MPL was not distributed with this -->
<!-- file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- Saved on Sunday, September 09, 2012, 9:56 AM -->
<!-- MuClient version 4.81 -->

<!-- Plugin "mume_macros" generated by Plugin Wizard -->

<muclient>
<plugin
   name="mume_macros"
   author="Nick Stockton"
   id="a0a9837c5486a08f13defd7a"
   language="Lua"
   purpose="Defines keyboard macros to be used while playing mume."
   date_written="2012-09-09 09:55:17"
   requires="4.70"
   version="1.0"
   >

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<!--  Aliases  -->

<aliases>
  <alias
   name="set_repeat_command"
   match="setrep(?P&lt;command&gt;.*)$"
   enabled="y"
   regexp="y"
   group="mume_macros"
   send_to="12"
   sequence="100"
  >
  <send>set_repeat("%&lt;command&gt;")</send>
  </alias>
</aliases>

<!--  Script  -->


<script>
<![CDATA[
screenReader = "925cdd0331023d9f0b8f05a7"
config = "d19a2f0a604c96b7318aa67f"
mume_misc = "ad20dd80cbd7c2fea78ce15c"
mume_castor_spell_translator = "8b4e5dd676d8477dc5f14376"
repeat_command = nil

function set_repeat(command)
	command = Trim(command)
	if command == "" then
		if repeat_command then
			CallPlugin(screenReader, "sayNote", string.format("'%s' is repeated.", repeat_command))
		else
			CallPlugin(screenReader, "sayNote", "Repeat command not set.")
		end
	elseif command == "clear" then
		repeat_command = nil
		CallPlugin(screenReader, "sayNote", "Cleared.")
	else
		repeat_command = command
		CallPlugin(screenReader, "sayNote", string.format("'%s' now repeated.", repeat_command))
	end
end

function repeat_last_command()
	local command = repeat_command or GetCommandList(1)[1]
	if command then
		Execute(command)
	else
		CallPlugin(screenReader, "sayNote", "No repeat command.")
	end
end

local return_code, keyboard_layout = CallPlugin(config, "get", "keyboard_layout")
if keyboard_layout == "dvorak" then
	Accelerator("Alt+C", "north")
	Accelerator("Alt+T", "south")
	Accelerator("Alt+N", "east")
	Accelerator("Alt+H", "west")
	Accelerator("Alt+G", "up")
	Accelerator("Alt+R", "down")
	Accelerator("Alt+shift+C", "escape north")
	Accelerator("Alt+shift+T", "escape south")
	Accelerator("Alt+shift+N", "escape east")
	Accelerator("Alt+shift+H", "escape west")
	Accelerator("Alt+shift+G", "escape up")
	Accelerator("Alt+shift+R", "escape down")
	Accelerator("Alt+S", "roomname")
	Accelerator("Alt+B", "flee")
	Accelerator("Alt+M", "v")
	AcceleratorTo("alt+I", "CallPlugin(mume_misc, 'speak_prompt', 'buffer')", sendto.script)
	AcceleratorTo("alt+U", "CallPlugin(mume_misc, 'speak_prompt', 'fighting')", sendto.script)
	AcceleratorTo("alt+E", "CallPlugin(mume_misc, 'speak_prompt', 'hp')", sendto.script)
	AcceleratorTo("alt+O", "CallPlugin(mume_misc, 'speak_prompt', 'mp')", sendto.script)
	AcceleratorTo("alt+A", "CallPlugin(mume_misc, 'speak_prompt', 'mv')", sendto.script)
	AcceleratorTo("alt+;", "CallPlugin(mume_misc, 'speak_prompt', 'light')", sendto.script)
	AcceleratorTo("alt+Q", "CallPlugin(mume_misc, 'speak_prompt', 'terrain')", sendto.script)
	AcceleratorTo("alt+J", "CallPlugin(mume_misc, 'speak_prompt', 'last_fought')", sendto.script)
	AcceleratorTo("alt+K", "CallPlugin(mume_misc, 'speak_prompt', 'flags')", sendto.script)
	AcceleratorTo("alt+X", "CallPlugin(mume_misc, 'speak_prompt', 'sneak')", sendto.script)
	AcceleratorTo("alt+P", "repeat_last_command()", sendto.script)
else
	Accelerator("Alt+I", "north")
	Accelerator("Alt+K", "south")
	Accelerator("Alt+L", "east")
	Accelerator("Alt+J", "west")
	Accelerator("Alt+U", "up")
	Accelerator("Alt+O", "down")
	Accelerator("Alt+shift+I", "escape north")
	Accelerator("Alt+shift+K", "escape south")
	Accelerator("Alt+shift+L", "escape east")
	Accelerator("Alt+shift+J", "escape west")
	Accelerator("Alt+shift+U", "escape up")
	Accelerator("Alt+shift+O", "escape down")
	Accelerator("Alt+;", "roomname")
	Accelerator("Alt+N", "flee")
	Accelerator("Alt+M", "v")
	AcceleratorTo("alt+G", "CallPlugin(mume_misc, 'speak_prompt', 'buffer')", sendto.script)
	AcceleratorTo("alt+F", "CallPlugin(mume_misc, 'speak_prompt', 'fighting')", sendto.script)
	AcceleratorTo("alt+D", "CallPlugin(mume_misc, 'speak_prompt', 'hp')", sendto.script)
	AcceleratorTo("alt+S", "CallPlugin(mume_misc, 'speak_prompt', 'mp')", sendto.script)
	AcceleratorTo("alt+A", "CallPlugin(mume_misc, 'speak_prompt', 'mv')", sendto.script)
	AcceleratorTo("alt+Z", "CallPlugin(mume_misc, 'speak_prompt', 'light')", sendto.script)
	AcceleratorTo("alt+X", "CallPlugin(mume_misc, 'speak_prompt', 'terrain')", sendto.script)
	AcceleratorTo("alt+C", "CallPlugin(mume_misc, 'speak_prompt', 'last_fought')", sendto.script)
	AcceleratorTo("alt+V", "CallPlugin(mume_misc, 'speak_prompt', 'flags')", sendto.script)
	AcceleratorTo("alt+B", "CallPlugin(mume_misc, 'speak_prompt', 'sneak')", sendto.script)
	AcceleratorTo("alt+R", "repeat_last_command()", sendto.script)
end

Accelerator("ctrl+shift+M", "assist")
Accelerator("ctrl+shift+B", "bash")
AcceleratorTo ("ctrl+U", "SelectCommand(); PasteCommand(''); CallPlugin(screenReader, 'say', 'Cleared')", sendto.script)
	AcceleratorTo("ctrl+I", "CallPlugin(mume_castor_spell_translator, 'toggle_casting_interrupt')", sendto.script)

]]>
</script>


</muclient>
