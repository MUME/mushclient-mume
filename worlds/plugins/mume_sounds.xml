<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- This Source Code Form is subject to the terms of the Mozilla Public -->
<!-- License, v. 2.0. If a copy of the MPL was not distributed with this -->
<!-- file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- Saved on Monday, March 12, 2012, 9:41 AM -->
<!-- MuClient version 4.81 -->

<!-- Plugin "mume_sounds" generated by Plugin Wizard -->

<muclient>
<plugin
   name="mume_sounds"
   author="Nick Stockton"
   id="32821ab3fa17b04a8ab4c420"
   language="Lua"
   purpose="Sound triggers for Mume."
   date_written="2012-03-12 09:40:19"
   requires="4.70"
   version="1.0"
   >

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<!--  Triggers  -->

<triggers>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^ENEMY:\*.+(?P&lt;player&gt;Orc|Troll|Man|Woman|Elf|Half-Elf|Dwarf|Hobbit|Bear|Numenorean|Númenórean)\*:ENEMY.*?(?P&lt;action&gt;standing|sitting|resting|sleeping|fighting|riding|nocks a missile|begins some strange|arrived|leaves).+?((?P&lt;direction&gt;north|south|east|west|up|down|above|below|hiding place).*)?$"
   name="pk_action_sounds"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>local player = "%&lt;player&gt;"
local action = "%&lt;action&gt;"
if player=="Numenorean" or player=="Númenórean" or player=="Woman" then
	player = "Man"
end
if action == "nocks a missile" then
	action = "shooting"
elseif action == "begins some strange" then
	action = "casting"
end
if "%&lt;direction&gt;" ~= "hiding place" then
	PlaySound(9, GetInfo(67).."sounds/"..player..action.."%&lt;direction&gt;.wav", false, 0, 0)
end
</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^You begin to feel (?P&lt;need&gt;hungry|thirsty)\.$"
   name="hungry_thirsty_sounds"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>PlaySound(9, GetInfo(67).."sounds/%&lt;need&gt;.wav", false, 0, 0)
</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^You (?:feel a hidden presence|smell blood)\.$"
   name="Hidden_sound"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>PlaySound(9, GetInfo(67).."sounds/hidden.wav", false, 0, 0)
</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="You gain a level!"
   name="gain_level_sound"
   regexp="n"
   send_to="12"
   sequence="100"
  >
  <send>PlaySound(9, GetInfo(67).."sounds/tada.wav", false, 0, 0)
</send>
  </trigger>
</triggers>

<!--  Script  -->


<script>
<![CDATA[

function OnPluginInstall()
	SetOption("play_sounds_in_background", 1)
end

]]>
</script>


</muclient>
