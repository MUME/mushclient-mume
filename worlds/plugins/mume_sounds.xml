<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- This Source Code Form is subject to the terms of the Mozilla Public -->
<!-- License, v. 2.0. If a copy of the MPL was not distributed with this -->
<!-- file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- Saved on Monday, March 12, 2012, 9:41 AM -->
<!-- MuClient version 4.81 -->

<!-- Plugin "mume_sounds" generated by Plugin Wizard -->

<muclient>
<plugin
   name="mume_sounds"
   author="Nick Stockton"
   id="32821ab3fa17b04a8ab4c420"
   language="Lua"
   purpose="Sound triggers for Mume."
   date_written="2012-03-12 09:40:19"
   requires="4.70"
   version="1.0"
   >

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<!--  Triggers  -->

<triggers>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^Your bash at (?:a[n]? |the )?(?P&lt;someone&gt;.+?)(?: \((?P&lt;someone_label&gt;\w+)\))? sends (?:him|her|it) sprawling\.$"
   name="bash_target"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>
last_target_bashed = "%&lt;someone_label&gt;" ~= "" and "%&lt;someone_label&gt;" or "%&lt;someone&gt;"
play(TYPE_COMBAT, "combat/bash.wav", -100)
  </send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^As (?:a[n]? |the )?(?P&lt;someone&gt;.+?)(?: \((?P&lt;someone_label&gt;\w+)\))? avoids your bash\, you topple over and lose your balance\.$"
   name="bash_fail_target"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_COMBAT, "combat/bash_fail.wav", -100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^You dodge a bash from (?:a[n]? |the )?(?P&lt;someone&gt;.+?)(?: \((?P&lt;someone_label&gt;\w+)\))? who loses (?:his|her|its) balance\.$"
   name="bash_fail_you"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_COMBAT, "combat/bash_fail.wav", 100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="Your head stops stinging."
   name="bash_recover_you"
   omit_from_output="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_COMBAT, "combat/bash_recover.wav", 100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^(?:A[n]? |The )?(?P&lt;basher&gt;.+?)(?: \((?P&lt;basher_label&gt;\w+)\))? sends (?:A[n]? |The )?(?P&lt;someone&gt;.+?)(?: \((?P&lt;someone_label&gt;\w+)\))? sprawling with a powerful bash\.$"
   name="bash_someone"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>
if "%&lt;someone&gt;" == "you" then
	play(TYPE_COMBAT, "combat/bash.wav", 100)
elseif string.startswith("%&lt;someone&gt;", "*") then
	-- Opposite side player was bashed, but not by the user.
	play(TYPE_COMBAT, "combat/bash.wav", -8)
elseif string.startswith("%&lt;basher&gt;", "*") then
	-- Opposite side player bashed someone or something, but the thing bashed was *not* the user.
	play(TYPE_COMBAT, "combat/bash.wav", 8)
else
	-- Someone or something was bashed, but the basher was *not* an opposite side player, and the person bashed was *not* the user.
	play(TYPE_COMBAT, "combat/bash.wav")
end
  </send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^(?:A[n]? |The )?(?P&lt;someone&gt;.+?)(?: \((?P&lt;someone_label&gt;\w+)\))? avoids being bashed by (?:a[n]? |the )?(?P&lt;basher&gt;.+?)(?: \((?P&lt;basher_label&gt;\w+)\))? who loses (?:his|her|its) balance\.$"
   name="bash_fail_someone"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>
if string.startswith("%&lt;someone&gt;", "*") then
	-- Someone other than the user failed to bash an opposite side player.
	play(TYPE_COMBAT, "combat/bash_fail.wav", -8)
elseif string.startswith("%&lt;basher&gt;", "*") then
	-- Opposite side player failed to bash someone or something, other than the user.
	play(TYPE_COMBAT, "combat/bash_fail.wav", 8)
else
	-- Someone or something other than the user failed bash.
	play(TYPE_COMBAT, "combat/bash_fail.wav")
end
  </send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^(?:A[n]? |The )?(?P&lt;someone&gt;.+?)(?: \((?P&lt;someone_label&gt;\w+)\))? seems to have recovered (?:his|her|its) senses\.$"
   name="bash_recover_someone"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>
if "%&lt;someone_label&gt;" ~= "" and "%&lt;someone_label&gt;" == last_target_bashed or "%&lt;someone&gt;" == last_target_bashed then
	-- The last player or mob that the user bashed has recovered from bash. (Possible to be invalid if more than one player or mob with the same name was bashed)
	play(TYPE_COMBAT, "combat/bash_recover.wav", -100)
	last_target_bashed = ""
elseif string.startswith("%&lt;someone&gt;", "*") then
	-- Opposite side player recovered from bash.
	play(TYPE_COMBAT, "combat/bash_recover.wav", -8)
else
	-- Someone or something recovered from bash.
	play(TYPE_COMBAT, "combat/bash_recover.wav")
end
  </send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^(?:Struggling against the Yellow Face\, you try|You start) to concentrate\.\.\.$"
   name="you_casting"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send></send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^(?:Argh\! You cannot concentrate any more\.\.\.|The cruel light of the sun made you lose your concentration\!)$"
   name="casting_interrupted"
   regexp="y"
   omit_from_output="y"
   send_to="12"
   sequence="100"
  >
  <send></send>
  </trigger>
  <trigger
   enabled="n"
   group="mume_sounds"
   match="^(?:Your victim has disappeared|Alas\! There was no clear line of sight to \w+)\!$"
   name="no_line_of_sight"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="Ok."
   name="ok"
   ignore_case="y"
   omit_from_output="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "ok.wav")</send>
  </trigger>
  <trigger
   enabled="n"
   lines_to_match="2"
   group="mume_sounds"
   match="^.+? utters the word[s]? &apos;[^&apos;]+?&apos;$Nothing seems to happen\.\Z"
   name="nothing_happens_other"
   omit_from_output="y"
   multi_line="y"
   regexp="y"
   sequence="80"
  >
  </trigger>
  <trigger
   enabled="n"
   group="mume_sounds"
   match="Nothing seems to happen."
   name="nothing_happens"
   send_to="12"
   sequence="100"
  >
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^\*.+(?P&lt;player&gt;Orc|Troll|Man|Woman|Elf|Half-Elf|Dwarf|Hobbit|Bear|Numenorean|Númenórean)\*.*?(?P&lt;action&gt;standing|sitting|resting|sleeping|fighting|riding|nocks a missile|begins some strange|arrived|leaves).+?((?P&lt;direction&gt;north|south|east|west|up|down|above|below|hiding place).*)?$"
   name="pk_action_sounds"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>
local player = "%&lt;player&gt;"
local action = "%&lt;action&gt;"
if player == "Numenorean" or player == "Númenórean" or player == "Woman" then
	player = "Man"
end
if action == "nocks a missile" then
	action = "shooting"
elseif action == "begins some strange" then
	action = "casting"
end
if "%&lt;direction&gt;" ~= "hiding place" then
	play(TYPE_PK, player .. action .. "%&lt;direction&gt;.wav")
end
  </send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^You begin to feel (?P&lt;need&gt;hungry|thirsty)\.$"
   name="hungry_thirsty_sounds"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "%&lt;need&gt;.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^You (?:feel a hidden presence\.|smell blood\.|have found [^\!]+\!)$"
   name="Hidden_sound"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "hidden.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="You gain a level!"
   name="gain_level_sound"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "tada.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^A (?:citizen[\- ])?mercenary (?:(?:leaves|has arrived from) [^\.]+|is here\, (?:looking|waiting) for a job)\.$"
   name="misc_alert1"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^(?:Cirdan the Shipwright|Elrond(?: the Master of Rivendell)?|Galadriel(?: the Lady of Lorien)?) (?:is standing here \(glowing\)|(?:leaves|has arrived from) [^\.]+)\.$"
   name="misc_alert2"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^A small campfire burns here\, its (?:low flames giving off only a little|embers barely giving off any) light.$"
   name="misc_alert3"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="The scarred fell beast opens its horrendous, shadow-veiled mouth and screeches!"
   name="misc_alert4"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="The ice layer is completely molten!"
   name="misc_alert5"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="A wider patch of rock is cleared of ice."
   name="misc_alert6"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="The Balrog entangles you in its whip and hurls you out of the room!"
   name="misc_alert7"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="The ground trembles slightly."
   name="misc_alert8"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^As \w+ finish(?:es)? (?:your|his|her) incantations\, a thick clump of intertwined roots writhes in agony and slowly withers into nothingness\.$"
   name="misc_alert9"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^An old man(?:\, swathed in a great light\-coloured cloak\, is standing here| is resting here)\.$"
   name="misc_alert10"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^A barely noticeable \*click\* is heard as you enter\.$"
   name="misc_alert11"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="Frychra lets out a high-pitched shriek, and answering calls come from all around!"
   name="misc_alert12"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="An Angmarian patrol-guard has been summoned by the Witch-king."
   name="misc_alert13"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^\w+ get[s]? an ancient dwarven key from the corpse of a packrat\.$"
   name="misc_alert14"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="With loud roaring, the webs catch fire and burn away with noxious, black fumes!"
   name="misc_alert15"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^You hear a barely noticeable \*click\*\, and sense that the floor descends$"
   name="misc_alert16"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="A darkly gnarled tree suddenly creaks and moves, slowly swaying back and forth."
   name="misc_alert17"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="An ebon wraith seeps from a crack in the ground!"
   name="misc_alert18"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="An ebon wraith dismounts from a Fell Beast, and stops riding him."
   name="misc_alert19"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="The misty shape of a man floats in the air."
   name="misc_alert20"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="With a roar, Mithnaur the Dragon lets a storm of fire sweep over the cave."
   name="misc_alert21"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="A pale figure of a battle-scarred man stands here."
   name="misc_alert22"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^A phantom terror looms here bathed in shadows of malice(?: \(hidden\))?\.$"
   name="misc_alert23"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="A sudden plop is heard from the dark lake."
   name="misc_alert24"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^(?:A relentless uruk of the Morgundul tribe is leading his soldiers here|An orkish expedition leader is standing here.*)\.$"
   name="misc_alert25"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^A huge(?:\, massively muscled troll turns and advances towards you| ravenous troll has arrived from the \w+)\.$"
   name="misc_alert26"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^A (?:pony|dales-pony|horse|warhorse|pack horse|trained horse|horse of the Rohirrim|brown donkey|mountain mule|hungry warg|brown wolf)(?: \(\w+\))? steps on a trap and plunges down a hole\!$"
   name="misc_alert27"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="Rostam the Easterling creates a black, twirling cloud over a raven!"
   name="misc_alert28"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="Rostam pulls a lever, and door to the south opens!"
   name="misc_alert29"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "misc_alert.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^A (?:great\, wild boar|citizen mercenary)(?: \(\w+\))? sits down and rests\.$"
   name="alert_mercenary_resting"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_ALERT, "spells/sleep.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^(?:A blue transparent wall slowly appears around you|Your magic armour is revitalised)\.$"
   name="armour_up"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_STATUS, "spells/armour_on.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="You feel less protected."
   name="armour_down"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_STATUS, "spells/armour_off.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^You (?:begin to feel the light of Aman|feel a renewed light) shine upon you\.$"
   name="bless_up"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_STATUS, "spells/bless_on.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="The light of Aman fades away from you."
   name="bless_down"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_STATUS, "spells/bless_off.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^You(?: feel protected|r protection is revitalised)\.$"
   name="shield_up"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_STATUS, "spells/shield_on.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="Your magical shield wears off."
   name="shield_down"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_STATUS, "spells/shield_off.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^(?:You feel stronger|The duration of the strength spell has been improved)\.$"
   name="strength_up"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_STATUS, "spells/strength_on.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="You feel weaker."
   name="strength_down"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_STATUS, "spells/strength_off.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^You(?: feel your awareness improve|r awareness is refreshed)\.$"
   name="sense_life_up"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_STATUS, "spells/sense_life_on.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="You feel less aware of your surroundings."
   name="sense_life_down"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_STATUS, "spells/sense_life_off.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^(?:An energy begins to flow within your legs as your body becomes lighter|The energy in your legs is refreshed)\.$"
   name="breath_of_briskness_up"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_STATUS, "spells/breath_of_briskness_on.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="Your legs feel heavier."
   name="breath_of_briskness_down"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_STATUS, "spells/breath_of_briskness_off.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^(?:You start glowing|Your aura glows more intensely)\.$"
   name="sanctuary_up"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_STATUS, "spells/sanctuary_on.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="The white aura around your body fades."
   name="sanctuary_down"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_STATUS, "spells/sanctuary_off.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="You have been blinded!"
   name="blindness_up1"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_STATUS, "spells/blindness_on.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="You dream about going blind!"
   name="blindness_up2"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_STATUS, "spells/blindness_on.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="You feel a cloak of blindness dissolve."
   name="blindness_down"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_STATUS, "spells/blindness_off.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^(?:As you call upon Elbereth\, [^\.]+? shivers in pain|[^\.]+? is dissolved by your goodness)\.$"
   name="dispel_evil_target"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/dispel_evil.wav", -100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^[^\.]+? (?:dissolves your evil presence|makes your evil soul suffer with h(?:is|er) goodness)\.$"
   name="dispel_evil_you"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/dispel_evil.wav", 100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="You raise your hand and an icy wind starts to blow through the room."
   name="fear_target"
   omit_from_output="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/fear.wav", -100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="An icy wind starts to blow in the room. You panic!"
   name="fear_you"
   omit_from_output="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/fear.wav", 100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="The world starts to speed up as you feel your muscles start to stiffen."
   name="fear_sage"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/fear.wav", 100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="A hideous phantom explodes from the night, chilling your soul with a scream of horrible delight!"
   name="fear_dugorwath"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/fear.wav", 100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="With a powerful sweep of its fists, the dwarven statue throws you out of the room!"
   name="fear_dwarven_statue"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/fear.wav", 100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="You feel a wave of panic in your heart."
   name="fear_lord"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/fear.wav", 100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^You(?:r spray of light rips [^\.]+? apart completely\, killing \w+| spray [^\.]+? with many\-coloured rays of bright light)\.$"
   name="colour_spray_target"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/colour_spray.wav", -100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^(?:You die as [^\.]+? sprays you with bright|[^\.]+? sprays you with piercing rays of many\-coloured) light\.$"
   name="colour_spray_you"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/colour_spray.wav", 100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^You burn(?:ed)? [^\.]+\.$"
   name="burning_hands_target"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/burning_hands.wav", -100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^[^\.]+? burns you\.$"
   name="burning_hands_you"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/burning_hands.wav", 100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^Your fireball (?:completely envelops [^\.]+? in flames|hits [^\.]+? with full force\, causing an immediate death)\.$"
   name="fireball_target"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/fireball.wav", -100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^[^\.]+? fireball completely envelops you\, causing infernal pain\.$"
   name="fireball_you"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/fireball.wav", 100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^The (?:impact of your lightning bolt kills [^\.]+|lightning bolt hits [^\.]+? with full impact)\.$"
   name="lightning_bolt_target"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/lightning_bolt.wav", -100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^(?:You&apos;re killed by the lightning bolt sent by [^\.]+|[^\.]+? sends a powerful lightning bolt at you\, you stagger from the impact)\.$"
   name="lightning_bolt_you"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/lightning_bolt.wav", 100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="The earth trembles beneath your feet!"
   name="earthquake_target"
   omit_from_output="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/earthquake.wav", -100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^[^\.]+? makes the earth tremble and shiver\.$"
   name="earthquake_you"
   omit_from_output="y"
   send_to="12"
   regexp="y"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/earthquake.wav", 100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="The earth trembles and shivers."
   name="earthquake_near1"
   omit_from_output="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/earthquake_near.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="A (?:moderate|mild) tremor shakes the ground."
   name="earthquake_near2"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/earthquake_near.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   lines_to_match="2"
   group="mume_sounds"
   match="^Ok\.$[^\.]+? lies down and falls asleep\.\Z"
   name="sleep_target"
   omit_from_output="y"
   multi_line="y"
   regexp="y"
   send_to="12"
   sequence="80"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/sleep.wav", -100)</send>
  </trigger>
  <trigger
   enabled="y"
   lines_to_match="2"
   group="mume_sounds"
   match="^[^&apos;]+? utters the word &apos;(?:sleep|grzzs)&apos;$[^\.]+? lies down and falls asleep\.\Z"
   name="sleep_other"
   omit_from_output="y"
   multi_line="y"
   regexp="y"
   send_to="12"
   sequence="80"
  >
  <send>play(TYPE_FREE_SLOT, "spells/sleep.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   lines_to_match="2"
   group="mume_sounds"
   match="^Ok\.$[^\!]+? (?:seems to be blinded\!|shivers as some of \w+ eyes become glazed\.)\Z"
   name="blind_target"
   omit_from_output="y"
   multi_line="y"
   regexp="y"
   send_to="12"
   sequence="80"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/blind.wav", -100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^[^\!]+? (?:seems to be blinded\!|shivers as some of \w+ eyes become glazed\.)$"
   name="blind_other"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_FREE_SLOT, "spells/blind.wav")</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="Your victim is already blind."
   name="already_blind_target"
   omit_from_output="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "spells/already_blind.wav", -100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^(?:[^\.]+? swiftly dodges your attempt to shoot \w+|You try to shoot [^\.]+?\, but \w+ parries successfully|Your attempt to shoot [^\.]+? fails)\.$"
   name="fail_shoot_target"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "combat/fail_shoot.wav", -100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^(?:You swiftly dodge [^\.]+? attempt to shoot you|[^\.]+? tries to shoot you\, but your parry is successful)\.$"
   name="fail_shoot_you"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "combat/fail_shoot.wav", 100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^You (?:barely |lightly |strongly )?shoot [^\.]+\.$"
   name="shoot_target"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "combat/shoot.wav", -100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^[^\.]+? (?:barely |lightly |strongly )?shoots your [^\.]+\.$"
   name="shoot_you"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "combat/shoot.wav", 100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^[^\.]+? makes a strange sound(?: but is suddenly very silent)?\, as you place (?:something|a[n]? [^\.]+?) in \w+ back\.$"
   name="backstab_target"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "skills/backstab/" .. math.random(1, 7) .. ".wav", -100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^Suddenly [^\.]+? stabs you in the back(?:\, you die)?\.$"
   name="backstab_you"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "skills/backstab/" .. math.random(1, 7) .. ".wav", 100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^(?:[^\.]+? easily avoids your backstab\.|Oops\, your victim (?:caught you by surprise|seems to have sensed a danger)\!)$"
   name="fail_backstab_target"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "skills/backstab/fail_backstab.wav", -100)</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_sounds"
   match="^(?:You surprise [^\.]+\.|Oops\, you&apos;ve sensed a danger\!)$"
   name="fail_backstab_you"
   omit_from_output="y"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>play(TYPE_SPELL_ATTACK, "skills/backstab/fail_backstab.wav", 100)</send>
  </trigger>
</triggers>

<!--  Script  -->


<script>
<![CDATA[
require("mystdlib")

CONFIG = "d19a2f0a604c96b7318aa67f"
TTS = "925cdd0331023d9f0b8f05a7"
TYPE_FREE_SLOT = 0
TYPE_ALERT = 3
TYPE_SPELL_ATTACK = 4
TYPE_SPELL_STATUS = 5
TYPE_COMBAT = 6
TYPE_PK = 8
TYPE_COMMUNICATION = 9

return_code, sound_volume = CallPlugin(CONFIG, "get", "sound_volume")
sound_volume = sound_volume or 0
return_code, sound_mute = CallPlugin(CONFIG, "get", "sound_mute")
sound_mute = sound_mute or false
last_target_bashed = ""

math.randomseed(os.time())

function toggle_mute()
	sound_mute = not sound_mute
	CallPlugin(CONFIG, "set", "sound_mute", sound_mute)
	CallPlugin(TTS, "say", string.format("%sMuted", sound_mute and "" or "Un"), true)
end

function adjust_volume(value)
	local volume = sound_volume + value
	CallPlugin(TTS, "silence")
	if sound_mute then
		sound_mute = false
		CallPlugin(CONFIG, "set", "sound_mute", sound_mute)
		CallPlugin(TTS, "say", "UnMuted", false)
	end
	if volume < -100 then
		volume = -100
	elseif volume > 0 then
		volume = 0
	end
	sound_volume = volume
	CallPlugin(CONFIG, "set", "sound_volume", sound_volume)
	CallPlugin(TTS, "say", string.format("%dDB volume.", sound_volume), false)
end

function play(sound_type, file_name, pan, loop)
	if not sound_mute then
		PlaySound(sound_type, GetInfo(67) .. "sounds/" .. file_name, loop and true or false, sound_volume, pan or 0)
	end
end

function OnPluginInstall()
	SetOption("play_sounds_in_background", 1)
end

]]>
</script>


</muclient>
