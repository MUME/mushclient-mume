<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- This Source Code Form is subject to the terms of the Mozilla Public -->
<!-- License, v. 2.0. If a copy of the MPL was not distributed with this -->
<!-- file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- Saved on Sunday, June 17, 2012, 11:04 PM -->
<!-- MuClient version 4.81 -->

<!-- Plugin "mume_hunting" generated by Plugin Wizard -->

<muclient>
<plugin
   name="mume_hunting"
   author="Nick Stockton"
   id="d54f37916d74ac326debe33f"
   language="Lua"
   purpose="Provides a target system and some other useful aliases for hunting on Mume"
   date_written="2012-06-17 23:02:12"
   requires="4.70"
   version="1.0"
   >

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<!--  Aliases  -->

<aliases>
  <alias
   name="set_target"
   match="^tt(?P&lt;target&gt; [*\w-\.]+)?$"
   enabled="y"
   group="mume_hunting"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>setTarget("%&lt;target&gt;")</send>
  </alias>
  <alias
   name="backstab_target1"
   match="bs."
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>. backstab</send>
  </alias>
  <alias
   name="backstab_target2"
   match="j"
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>. backstab</send>
  </alias>
  <alias
   name="backstab_target_flee"
   match="jf"
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>. backstab
flee</send>
  </alias>
  <alias
   name="target_fighting"
   match="ttf"
   enabled="y"
   group="mume_hunting"
   send_to="12"
   sequence="100"
  >
  <send>Send("label t")
setTarget("t")</send>
  </alias>
  <alias
   name="target_again"
   match="tta"
   enabled="y"
   group="mume_hunting"
   send_to="12"
   sequence="100"
  >
  <send>setTarget("AGAIN")</send>
  </alias>
  <alias
   name="shoot_target"
   match="s."
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>. shoot</send>
  </alias>
  <alias
   name="action_target"
   match=". *"
   enabled="y"
   group="mume_hunting"
   send_to="12"
   sequence="100"
  >
  <send>doTarget("%1")</send>
  </alias>
  <alias
   name="kill_elf"
   match="ke"
   enabled="y"
   group="mume_hunting"
   sequence="100"
  >
  <send>kill *elf*</send>
  </alias>
  <alias
   name="kill_half_elf"
   match="khe"
   enabled="y"
   group="mume_hunting"
   sequence="100"
  >
  <send>kill *half-elf*</send>
  </alias>
  <alias
   name="Set_target_t"
   match="ttt"
   enabled="y"
   group="mume_hunting"
   send_to="12"
   sequence="100"
  >
  <send>setTarget("t")</send>
  </alias>
  <alias
   name="target_dwarf"
   match="ttd"
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>tt *dwarf*</send>
  </alias>
  <alias
   name="clear_target"
   match="ttc"
   enabled="y"
   group="mume_hunting"
   send_to="12"
   sequence="100"
  >
  <send>setTarget("CLEAR")</send>
  </alias>
  <alias
   name="kill_dwarf"
   match="kd"
   enabled="y"
   group="mume_hunting"
   sequence="100"
  >
  <send>kill *dwarf*</send>
  </alias>
  <alias
   name="where_target"
   match="w."
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>. where</send>
  </alias>
  <alias
   name="kill_target_flee"
   match="kf"
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>. kill
flee</send>
  </alias>
  <alias
   name="kill_target2"
   match="kk"
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>. kill</send>
  </alias>
  <alias
   name="bash_target1"
   match="b."
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>. bash</send>
  </alias>
  <alias
   name="bash_target2"
   match="bb"
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>. bash</send>
  </alias>
  <alias
   name="target_man"
   match="ttm"
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>tt *man*</send>
  </alias>
  <alias
   name="reveal_thorough"
   match="rt"
   enabled="y"
   group="mume_hunting"
   sequence="100"
  >
  <send>reveal thorough</send>
  </alias>
  <alias
   name="target_troll"
   match="ttr"
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>tt *troll*</send>
  </alias>
  <alias
   name="kill_man"
   match="km"
   enabled="y"
   group="mume_hunting"
   sequence="100"
  >
  <send>kill *man*</send>
  </alias>
  <alias
   name="kill_troll"
   match="kt"
   enabled="y"
   group="mume_hunting"
   sequence="100"
  >
  <send>kill *troll*</send>
  </alias>
  <alias
   name="target_orc"
   match="tto"
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>tt *orc*</send>
  </alias>
  <alias
   name="bash"
   match="^b(?P&lt;target&gt; \w+)?$"
   enabled="y"
   group="mume_hunting"
   regexp="y"
   sequence="100"
  >
  <send>bash %&lt;target&gt;</send>
  </alias>
  <alias
   name="examine_target"
   match="e."
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>. examine</send>
  </alias>
  <alias
   name="kill_hobbit"
   match="kh"
   enabled="y"
   group="mume_hunting"
   sequence="100"
  >
  <send>kill *hobbit*</send>
  </alias>
  <alias
   name="target_hobbit"
   match="tth"
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>tt *hobbit*</send>
  </alias>
  <alias
   name="track_target"
   match="t."
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>. track</send>
  </alias>
  <alias
   name="search_thorough"
   match="st"
   enabled="y"
   group="mume_hunting"
   sequence="100"
  >
  <send>search thorough</send>
  </alias>
  <alias
   name="search_quick"
   match="sq"
   enabled="y"
   group="mume_hunting"
   sequence="100"
  >
  <send>search quick</send>
  </alias>
  <alias
   name="consider_target"
   match="c."
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>. consider</send>
  </alias>
  <alias
   name="kill_target1"
   match="k."
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>. kill</send>
  </alias>
  <alias
   name="bash_target_flee"
   match="bf"
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>. bash
flee</send>
  </alias>
  <alias
   name="kill_bear"
   match="kb"
   enabled="y"
   group="mume_hunting"
   sequence="100"
  >
  <send>kill *bear*</send>
  </alias>
  <alias
   name="target_bear"
   match="ttb"
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>tt *bear*</send>
  </alias>
  <alias
   name="shoot_target_flee"
   match="sf"
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>. shoot
flee</send>
  </alias>
  <alias
   name="target_elf"
   match="tte"
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>tt *elf*</send>
  </alias>
  <alias
   name="target_half_elf"
   match="tthe"
   enabled="y"
   group="mume_hunting"
   send_to="10"
   sequence="100"
  >
  <send>tt *half-elf*</send>
  </alias>
  <alias
   name="kill_orc"
   match="ko"
   enabled="y"
   group="mume_hunting"
   sequence="100"
  >
  <send>kill *orc*</send>
  </alias>
  <alias
   name="spam_recover"
   match="rr"
   enabled="y"
   group="mume_hunting"
   sequence="100"
  >
  <send>get all.arrow all.corpse
get all.arrow
put all.arrow quiver</send>
  </alias>
  <alias
   name="reveal_quick"
   match="rq"
   enabled="y"
   group="mume_hunting"
   sequence="100"
  >
  <send>reveal quick</send>
  </alias>
</aliases>

<!--  Script  -->


<script>
<![CDATA[

screenReader = "925cdd0331023d9f0b8f05a7"
targeting = nil

function setTarget(target)
	if target == "CLEAR" then
		targeting = nil
		CallPlugin(screenReader, "sayNote", "Target cleared.")
	elseif target == "AGAIN" then
		if targeting then
			CallPlugin(screenReader, "sayNote", string.format("Targeting %s again!", targeting))
			Send(string.format("label %s t", targeting))
		else
			CallPlugin(screenReader, "sayNote", "Target is undefined! Can not target again.")
		end
	elseif target == "t" then
		CallPlugin(screenReader, "sayNote", "Target now t!")
		targeting = "t"
	elseif target and target~="" then
		targeting = target
		CallPlugin(screenReader, "sayNote", string.format("Target now %s!", target))
		Send(string.format("label %s t", target))
	elseif targeting then
		CallPlugin(screenReader, "sayNote", string.format("Targeting %s!", targeting))
	else
		CallPlugin(screenReader, "sayNote", "Target undefined.")
	end
end

function doTarget(action)
	if not action or action=="" then
		CallPlugin(screenReader, "sayNote", "No action given to do to target.")
	elseif targeting then
		Send(string.format("%s %s", action, targeting))
	else
		CallPlugin(screenReader, "sayNote", "Target undefined.")
	end
end

]]>
</script>


</muclient>
