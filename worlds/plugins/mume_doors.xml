<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- This Source Code Form is subject to the terms of the Mozilla Public -->
<!-- License, v. 2.0. If a copy of the MPL was not distributed with this -->
<!-- file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- Saved on Tuesday, June 19, 2012, 9:15 PM -->
<!-- MuClient version 4.81 -->

<!-- Plugin "mume_doors" generated by Plugin Wizard -->

<muclient>
<plugin
   name="mume_doors"
   author="Nick Stockton"
   id="8d6f0aa8ea88d5fc6f5e07d1"
   language="Lua"
   purpose="Aliases for handling doors, and auto open doors when you run in to them."
   date_written="2012-06-19 21:12:02"
   requires="4.70"
   version="1.0"
   >

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<!--  Triggers  -->

<triggers>
  <trigger
   enabled="y"
   group="mume_doors"
   match="^The (\w+) seem[s]? to be closed\.$"
   name="auto_open"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>door_name = "%1"
if auto_open then doorAction("open") end</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_doors"
   match="^The (\w+) (is|are) (open|closed)\.$"
   name="auto_set_name1"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>door_name = "%1"</send>
  </trigger>
  <trigger
   enabled="y"
   group="mume_doors"
   match="^You skillfully discover a hidden (\w+)\.$"
   name="auto_set_name2"
   regexp="y"
   send_to="12"
   sequence="100"
  >
  <send>door_name = "%1"</send>
  </trigger>
</triggers>

<!--  Aliases  -->

<aliases>
  <alias
   name="door_lock"
   match="dl"
   enabled="y"
   group="mume_doors"
   send_to="12"
   sequence="100"
  >
  <send>doorAction("lock")</send>
  </alias>
  <alias
   name="door_bash"
   match="db"
   enabled="y"
   group="mume_doors"
   send_to="12"
   sequence="100"
  >
  <send>doorAction("bash")</send>
  </alias>
  <alias
   name="door_pick"
   match="dp"
   enabled="y"
   group="mume_doors"
   send_to="12"
   sequence="100"
  >
  <send>doorAction("pick")</send>
  </alias>
  <alias
   name="door_unlock"
   match="du"
   enabled="y"
   group="mume_doors"
   send_to="12"
   sequence="100"
  >
  <send>doorAction("unlock")</send>
  </alias>
  <alias
   name="toggle_auto_open"
   match="autoopen"
   enabled="y"
   group="mume_doors"
   send_to="12"
   sequence="100"
  >
  <send>toggleAutoOpen()</send>
  </alias>
  <alias
   name="door_close"
   match="dc"
   enabled="y"
   group="mume_doors"
   send_to="12"
   sequence="100"
  >
  <send>doorAction("close")</send>
  </alias>
  <alias
   name="door_open"
   match="do"
   enabled="y"
   group="mume_doors"
   send_to="12"
   sequence="100"
  >
  <send>doorAction("open")</send>
  </alias>
</aliases>

<!--  Script  -->


<script>
<![CDATA[
screenReader = "925cdd0331023d9f0b8f05a7"
auto_open = true
door_name = ""

function toggleAutoOpen()
	auto_open = auto_open ~= true
	local status = auto_open and "on." or "off."
	CallPlugin(screenReader, "sayNote", "Auto open doors "..status)
end

function doorAction(action)
	Send(action.." "..door_name)
end

]]>
</script>


</muclient>
